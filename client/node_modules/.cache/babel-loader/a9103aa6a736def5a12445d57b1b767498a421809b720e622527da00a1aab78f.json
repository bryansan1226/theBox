{"ast":null,"code":"var _jsxFileName = \"/Users/bryansanchezandrade/Documents/box/client/src/components/AppBar.js\",\n  _s = $RefreshSig$();\nimport * as React from \"react\";\nimport { styled, alpha } from \"@mui/material/styles\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Typography from \"@mui/material/Typography\";\nimport InputBase from \"@mui/material/InputBase\";\nimport Badge from \"@mui/material/Badge\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport AccountCircle from \"@mui/icons-material/AccountCircle\";\nimport MailIcon from \"@mui/icons-material/Mail\";\nimport NotificationsIcon from \"@mui/icons-material/Notifications\";\nimport MoreIcon from \"@mui/icons-material/MoreVert\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport backendUrl from \"../config\";\nimport { useEffect } from \"react\";\nimport Popper from \"@mui/material/Popper\";\nimport PopupState, { bindToggle, bindPopper } from \"material-ui-popup-state\";\nimport Fade from \"@mui/material/Fade\";\nimport Paper from \"@mui/material/Paper\";\nimport Notifications from \"./Notifications\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Search = styled(\"div\")(({\n  theme\n}) => ({\n  position: \"relative\",\n  borderRadius: theme.shape.borderRadius,\n  backgroundColor: alpha(theme.palette.common.white, 0.15),\n  \"&:hover\": {\n    backgroundColor: alpha(theme.palette.common.white, 0.25)\n  },\n  marginRight: theme.spacing(2),\n  marginLeft: 0,\n  width: \"100%\",\n  [theme.breakpoints.up(\"sm\")]: {\n    marginLeft: theme.spacing(3),\n    width: \"auto\"\n  }\n}));\n_c = Search;\nconst SearchIconWrapper = styled(\"div\")(({\n  theme\n}) => ({\n  padding: theme.spacing(0, 2),\n  height: \"100%\",\n  position: \"absolute\",\n  pointerEvents: \"none\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  right: 0\n}));\n_c2 = SearchIconWrapper;\nconst StyledInputBase = styled(InputBase)(({\n  theme\n}) => ({\n  color: \"inherit\",\n  \"& .MuiInputBase-input\": {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(1)})`,\n    paddingRight: `calc(1em + ${theme.spacing(4)})`,\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"20ch\"\n    }\n  }\n}));\n_c3 = StyledInputBase;\nexport default function PrimarySearchAppBar(props) {\n  _s();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n  const [searchInput, setSearchInput] = React.useState(\"\");\n  const [newMessages, setNewMessages] = useState(0);\n  const [newNotifications, setNewNotifications] = useState(0);\n  const [notifications, setNotifications] = useState([]);\n  const navigate = useNavigate();\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n  const [userInfo, setUserInfo] = useState(null);\n  //const navigate = useNavigate();\n\n  const fetchUserInfo = async () => {\n    //  console.log(\"got to fetch\");\n    try {\n      //Retrieves token from localstorage, if no token is present the user will be redirected to /login\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        //redirect\n        navigate(\"/\");\n        return null;\n      }\n      //Makes a GET request to fetch user data using token\n      const response = await axios.get(`${backendUrl}api/user`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      // Returns user data if successful\n      return response.data;\n      //console.log(response.data);\n    } catch (error) {\n      console.error(\"Error fetching user information\", error);\n      return null;\n    }\n  };\n  //Function to get user info using fetchUserInfo and updates userInfo state.\n  const getUserInfo = async () => {\n    const info = await fetchUserInfo();\n    if (info) {\n      setUserInfo(info);\n      getNewMessages(info);\n      getNotifications(info);\n      return info.first_name;\n      // console.log(\"User info \", info);\n    } else {\n      console.log(\"User not authenticated or an error occured.\");\n    }\n  };\n  //Effect hook to get user info when component mounts\n  useEffect(() => {\n    getUserInfo();\n  }, []);\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n  const handleMobileMenuOpen = event => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n  const handleSearch = () => {\n    navigate(`/searchResults?searchQuery=${searchInput}&userInfo=${userInfo.user_id}`);\n  };\n  const handleEnterKeyPress = e => {\n    if (e.key === \"Enter\") {\n      handleSearch();\n    }\n  };\n  const handleMessageClick = () => {\n    navigate(`/messages?userInfo=${userInfo.user_id}`);\n  };\n  const handleNotificationsClick = () => {\n    navigate(`/notifications?userInfo=${userInfo.user_id}`);\n  };\n  const handleLogoClick = () => {\n    navigate(`/home`);\n  };\n  const getNewMessages = async info => {\n    await axios.get(`${backendUrl}api/getNewMessages/${info.user_id}`).then(response => {\n      const message = response.data.rows;\n      setNewMessages(message.length);\n      console.log(\"Response from server:\", message);\n    }).catch(error => {\n      console.error(\"Error fetching data: \", error);\n    });\n  };\n  const getNotifications = async info => {\n    await axios.get(`${backendUrl}api/getNotifications/${info.user_id}`).then(response => {\n      const message = response.data.rows;\n      setNotifications(message.sort((a, b) => {\n        const timeStampA = new Date(a.created_at).getTime();\n        const timeStampB = new Date(b.created_at).getTime();\n        return timeStampB - timeStampA;\n      }));\n      console.log(\"Response from server:\", message);\n      let count = 0;\n      for (let notification of message) {\n        if (!notification.is_read) count++;\n      }\n      setNewNotifications(count);\n    }).catch(error => {\n      console.error(\"Error fetching data: \", error);\n    });\n  };\n  const handleSignOut = () => {\n    setUserInfo(null);\n    localStorage.removeItem(\"token\");\n    navigate(\"/\");\n  };\n  const menuId = \"primary-search-account-menu\";\n  const renderMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    id: menuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: isMenuOpen,\n    onClose: handleMenuClose,\n    children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleMenuClose,\n      children: \"Profile (Future feature)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleMenuClose,\n      children: \"My account (Future feature)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleSignOut,\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n  const mobileMenuId = \"primary-search-account-menu-mobile\";\n  const renderMobileMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: mobileMoreAnchorEl,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    id: mobileMenuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: isMobileMenuOpen,\n    onClose: handleMobileMenuClose,\n    children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleMessageClick,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        size: \"large\",\n        \"aria-label\": \"show new mails\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          badgeContent: newMessages,\n          color: \"error\",\n          children: /*#__PURE__*/_jsxDEV(MailIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleNotificationsClick,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        size: \"large\",\n        \"aria-label\": \"show 17 new notifications\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          badgeContent: newNotifications,\n          color: \"error\",\n          children: /*#__PURE__*/_jsxDEV(NotificationsIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleSignOut,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        size: \"large\",\n        \"aria-label\": \"account of current user\",\n        \"aria-controls\": \"primary-search-account-menu\",\n        \"aria-haspopup\": \"true\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Sign Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      flexGrow: 1\n    },\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          size: \"large\",\n          edge: \"start\",\n          color: \"inherit\",\n          \"aria-label\": \"open drawer\",\n          sx: {\n            mr: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          noWrap: true,\n          component: \"div\",\n          sx: {\n            display: {\n              xs: \"none\",\n              sm: \"block\"\n            },\n            cursor: \"pointer\"\n          },\n          onClick: handleLogoClick,\n          children: \"The Box\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Search, {\n          children: [/*#__PURE__*/_jsxDEV(SearchIconWrapper, {\n            onClick: handleSearch,\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n              onClick: handleSearch\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledInputBase, {\n            placeholder: \"Search\\u2026\",\n            inputProps: {\n              \"aria-label\": \"search\"\n            },\n            onChange: e => setSearchInput(e.target.value),\n            onKeyDown: handleEnterKeyPress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flexGrow: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: {\n              xs: \"none\",\n              md: \"flex\"\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"large\",\n            \"aria-label\": \"show 4 new mails\",\n            color: \"inherit\",\n            onClick: handleMessageClick,\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: newMessages,\n              color: \"error\",\n              children: /*#__PURE__*/_jsxDEV(MailIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(PopupState, {\n            variant: \"popper\",\n            popupId: \"demo-popup-popper\",\n            children: popupState => /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"large\",\n                \"aria-label\": \"show 17 new notifications\",\n                color: \"inherit\",\n                ...bindToggle(popupState),\n                children: /*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: newNotifications,\n                  color: \"error\",\n                  children: /*#__PURE__*/_jsxDEV(NotificationsIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 336,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Popper, {\n                ...bindPopper(popupState),\n                transition: true,\n                children: ({\n                  TransitionProps\n                }) => /*#__PURE__*/_jsxDEV(Fade, {\n                  ...TransitionProps,\n                  timeout: 350,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    children: /*#__PURE__*/_jsxDEV(Paper, {\n                      sx: {\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        width: \"30vw\",\n                        height: \"50vh\",\n                        maxHeight: \"80vh\",\n                        overflow: \"auto\",\n                        spacing: \"2vh\",\n                        backgroundColor: \"rgb(24,118,210,.9)\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Notifications, {\n                        content: notifications\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 358,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"large\",\n            edge: \"end\",\n            \"aria-label\": \"account of current user\",\n            \"aria-controls\": menuId,\n            \"aria-haspopup\": \"true\",\n            onClick: handleProfileMenuOpen,\n            color: \"inherit\",\n            children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: {\n              xs: \"flex\",\n              md: \"none\"\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"large\",\n            \"aria-label\": \"show more\",\n            \"aria-controls\": mobileMenuId,\n            \"aria-haspopup\": \"true\",\n            onClick: handleMobileMenuOpen,\n            color: \"inherit\",\n            children: /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this), renderMobileMenu, renderMenu]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 5\n  }, this);\n}\n_s(PrimarySearchAppBar, \"L6ZY6bp6TNfK/TqZLVrlInYpCpQ=\", false, function () {\n  return [useNavigate];\n});\n_c4 = PrimarySearchAppBar;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Search\");\n$RefreshReg$(_c2, \"SearchIconWrapper\");\n$RefreshReg$(_c3, \"StyledInputBase\");\n$RefreshReg$(_c4, \"PrimarySearchAppBar\");","map":{"version":3,"names":["React","styled","alpha","AppBar","Box","Toolbar","IconButton","Typography","InputBase","Badge","MenuItem","Menu","MenuIcon","SearchIcon","AccountCircle","MailIcon","NotificationsIcon","MoreIcon","useNavigate","useState","axios","backendUrl","useEffect","Popper","PopupState","bindToggle","bindPopper","Fade","Paper","Notifications","jsxDEV","_jsxDEV","Search","theme","position","borderRadius","shape","backgroundColor","palette","common","white","marginRight","spacing","marginLeft","width","breakpoints","up","_c","SearchIconWrapper","padding","height","pointerEvents","display","alignItems","justifyContent","right","_c2","StyledInputBase","color","paddingLeft","paddingRight","transition","transitions","create","_c3","PrimarySearchAppBar","props","_s","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","searchInput","setSearchInput","newMessages","setNewMessages","newNotifications","setNewNotifications","notifications","setNotifications","navigate","isMenuOpen","Boolean","isMobileMenuOpen","userInfo","setUserInfo","fetchUserInfo","token","localStorage","getItem","response","get","headers","Authorization","data","error","console","getUserInfo","info","getNewMessages","getNotifications","first_name","log","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","handleMobileMenuOpen","handleSearch","user_id","handleEnterKeyPress","e","key","handleMessageClick","handleNotificationsClick","handleLogoClick","then","message","rows","length","catch","sort","a","b","timeStampA","Date","created_at","getTime","timeStampB","count","notification","is_read","handleSignOut","removeItem","menuId","renderMenu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","mobileMenuId","renderMobileMenu","size","badgeContent","sx","flexGrow","edge","mr","variant","noWrap","component","xs","sm","cursor","placeholder","inputProps","onChange","target","value","onKeyDown","md","popupId","popupState","TransitionProps","timeout","flexDirection","maxHeight","overflow","content","_c4","$RefreshReg$"],"sources":["/Users/bryansanchezandrade/Documents/box/client/src/components/AppBar.js"],"sourcesContent":["import * as React from \"react\";\nimport { styled, alpha } from \"@mui/material/styles\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Box from \"@mui/material/Box\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Typography from \"@mui/material/Typography\";\nimport InputBase from \"@mui/material/InputBase\";\nimport Badge from \"@mui/material/Badge\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Menu from \"@mui/material/Menu\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport AccountCircle from \"@mui/icons-material/AccountCircle\";\nimport MailIcon from \"@mui/icons-material/Mail\";\nimport NotificationsIcon from \"@mui/icons-material/Notifications\";\nimport MoreIcon from \"@mui/icons-material/MoreVert\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport backendUrl from \"../config\";\nimport { useEffect } from \"react\";\nimport Popper from \"@mui/material/Popper\";\nimport PopupState, { bindToggle, bindPopper } from \"material-ui-popup-state\";\nimport Fade from \"@mui/material/Fade\";\nimport Paper from \"@mui/material/Paper\";\nimport Notifications from \"./Notifications\";\n\nconst Search = styled(\"div\")(({ theme }) => ({\n  position: \"relative\",\n  borderRadius: theme.shape.borderRadius,\n  backgroundColor: alpha(theme.palette.common.white, 0.15),\n  \"&:hover\": {\n    backgroundColor: alpha(theme.palette.common.white, 0.25),\n  },\n  marginRight: theme.spacing(2),\n  marginLeft: 0,\n  width: \"100%\",\n  [theme.breakpoints.up(\"sm\")]: {\n    marginLeft: theme.spacing(3),\n    width: \"auto\",\n  },\n}));\n\nconst SearchIconWrapper = styled(\"div\")(({ theme }) => ({\n  padding: theme.spacing(0, 2),\n  height: \"100%\",\n  position: \"absolute\",\n  pointerEvents: \"none\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  right: 0,\n}));\n\nconst StyledInputBase = styled(InputBase)(({ theme }) => ({\n  color: \"inherit\",\n  \"& .MuiInputBase-input\": {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(1)})`,\n    paddingRight: `calc(1em + ${theme.spacing(4)})`,\n    transition: theme.transitions.create(\"width\"),\n    width: \"100%\",\n    [theme.breakpoints.up(\"md\")]: {\n      width: \"20ch\",\n    },\n  },\n}));\n\nexport default function PrimarySearchAppBar(props) {\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n  const [searchInput, setSearchInput] = React.useState(\"\");\n  const [newMessages, setNewMessages] = useState(0);\n  const [newNotifications, setNewNotifications] = useState(0);\n  const [notifications, setNotifications] = useState([]);\n  const navigate = useNavigate();\n\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n  const [userInfo, setUserInfo] = useState(null);\n  //const navigate = useNavigate();\n\n  const fetchUserInfo = async () => {\n    //  console.log(\"got to fetch\");\n    try {\n      //Retrieves token from localstorage, if no token is present the user will be redirected to /login\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        //redirect\n        navigate(\"/\");\n        return null;\n      }\n      //Makes a GET request to fetch user data using token\n      const response = await axios.get(`${backendUrl}api/user`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      // Returns user data if successful\n      return response.data;\n      //console.log(response.data);\n    } catch (error) {\n      console.error(\"Error fetching user information\", error);\n      return null;\n    }\n  };\n  //Function to get user info using fetchUserInfo and updates userInfo state.\n  const getUserInfo = async () => {\n    const info = await fetchUserInfo();\n    if (info) {\n      setUserInfo(info);\n      getNewMessages(info);\n      getNotifications(info);\n      return info.first_name;\n      // console.log(\"User info \", info);\n    } else {\n      console.log(\"User not authenticated or an error occured.\");\n    }\n  };\n  //Effect hook to get user info when component mounts\n  useEffect(() => {\n    getUserInfo();\n  }, []);\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = (event) => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n  const handleSearch = () => {\n    navigate(\n      `/searchResults?searchQuery=${searchInput}&userInfo=${userInfo.user_id}`\n    );\n  };\n  const handleEnterKeyPress = (e) => {\n    if (e.key === \"Enter\") {\n      handleSearch();\n    }\n  };\n  const handleMessageClick = () => {\n    navigate(`/messages?userInfo=${userInfo.user_id}`);\n  };\n  const handleNotificationsClick = () => {\n    navigate(`/notifications?userInfo=${userInfo.user_id}`);\n  };\n  const handleLogoClick = () => {\n    navigate(`/home`);\n  };\n  const getNewMessages = async (info) => {\n    await axios\n      .get(`${backendUrl}api/getNewMessages/${info.user_id}`)\n      .then((response) => {\n        const message = response.data.rows;\n        setNewMessages(message.length);\n\n        console.log(\"Response from server:\", message);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data: \", error);\n      });\n  };\n  const getNotifications = async (info) => {\n    await axios\n      .get(`${backendUrl}api/getNotifications/${info.user_id}`)\n      .then((response) => {\n        const message = response.data.rows;\n        setNotifications(\n          message.sort((a, b) => {\n            const timeStampA = new Date(a.created_at).getTime();\n            const timeStampB = new Date(b.created_at).getTime();\n            return timeStampB - timeStampA;\n          })\n        );\n        console.log(\"Response from server:\", message);\n        let count = 0;\n        for (let notification of message) {\n          if (!notification.is_read) count++;\n        }\n        setNewNotifications(count);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data: \", error);\n      });\n  };\n\n  const handleSignOut = () => {\n    setUserInfo(null);\n    localStorage.removeItem(\"token\");\n    navigate(\"/\");\n  };\n\n  const menuId = \"primary-search-account-menu\";\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{\n        vertical: \"top\",\n        horizontal: \"right\",\n      }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{\n        vertical: \"top\",\n        horizontal: \"right\",\n      }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem onClick={handleMenuClose}>Profile (Future feature)</MenuItem>\n      <MenuItem onClick={handleMenuClose}>My account (Future feature)</MenuItem>\n      <MenuItem onClick={handleSignOut}>Sign Out</MenuItem>\n    </Menu>\n  );\n\n  const mobileMenuId = \"primary-search-account-menu-mobile\";\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{\n        vertical: \"top\",\n        horizontal: \"right\",\n      }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{\n        vertical: \"top\",\n        horizontal: \"right\",\n      }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem onClick={handleMessageClick}>\n        <IconButton size=\"large\" aria-label=\"show new mails\" color=\"inherit\">\n          <Badge badgeContent={newMessages} color=\"error\">\n            <MailIcon />\n          </Badge>\n        </IconButton>\n        <p>Messages</p>\n      </MenuItem>\n      <MenuItem onClick={handleNotificationsClick}>\n        <IconButton\n          size=\"large\"\n          aria-label=\"show 17 new notifications\"\n          color=\"inherit\"\n        >\n          <Badge badgeContent={newNotifications} color=\"error\">\n            <NotificationsIcon />\n          </Badge>\n        </IconButton>\n        <p>Notifications</p>\n      </MenuItem>\n\n      <MenuItem onClick={handleSignOut}>\n        <IconButton\n          size=\"large\"\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          <AccountCircle />\n        </IconButton>\n        <p>Sign Out</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton\n            size=\"large\"\n            edge=\"start\"\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            sx={{ mr: 2 }}\n          >\n            {/*<MenuIcon />*/}\n          </IconButton>\n          <Typography\n            variant=\"h6\"\n            noWrap\n            component=\"div\"\n            sx={{ display: { xs: \"none\", sm: \"block\" }, cursor: \"pointer\" }}\n            onClick={handleLogoClick}\n          >\n            The Box\n          </Typography>\n          <Search>\n            <SearchIconWrapper onClick={handleSearch}>\n              <SearchIcon onClick={handleSearch} />\n            </SearchIconWrapper>\n            <StyledInputBase\n              placeholder=\"Search…\"\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={(e) => setSearchInput(e.target.value)}\n              onKeyDown={handleEnterKeyPress}\n            />\n          </Search>\n          <Box sx={{ flexGrow: 1 }} />\n          <Box sx={{ display: { xs: \"none\", md: \"flex\" } }}>\n            <IconButton\n              size=\"large\"\n              aria-label=\"show 4 new mails\"\n              color=\"inherit\"\n              onClick={handleMessageClick}\n            >\n              <Badge badgeContent={newMessages} color=\"error\">\n                <MailIcon />\n              </Badge>\n            </IconButton>\n\n            <PopupState variant=\"popper\" popupId=\"demo-popup-popper\">\n              {(popupState) => (\n                <div>\n                  <IconButton\n                    size=\"large\"\n                    aria-label=\"show 17 new notifications\"\n                    color=\"inherit\"\n                    {...bindToggle(popupState)}\n                  >\n                    <Badge badgeContent={newNotifications} color=\"error\">\n                      <NotificationsIcon />\n                    </Badge>\n                  </IconButton>\n                  <Popper {...bindPopper(popupState)} transition>\n                    {({ TransitionProps }) => (\n                      <Fade {...TransitionProps} timeout={350}>\n                        <Box>\n                          <Paper\n                            sx={{\n                              display: \"flex\",\n                              flexDirection: \"column\",\n                              alignItems: \"center\",\n                              justifyContent: \"center\",\n                              width: \"30vw\",\n                              height: \"50vh\",\n                              maxHeight: \"80vh\",\n                              overflow: \"auto\",\n                              spacing: \"2vh\",\n                              backgroundColor: \"rgb(24,118,210,.9)\",\n                            }}\n                          >\n                            <Notifications content={notifications} />\n                          </Paper>\n                        </Box>\n                      </Fade>\n                    )}\n                  </Popper>\n                </div>\n              )}\n            </PopupState>\n            <IconButton\n              size=\"large\"\n              edge=\"end\"\n              aria-label=\"account of current user\"\n              aria-controls={menuId}\n              aria-haspopup=\"true\"\n              onClick={handleProfileMenuOpen}\n              color=\"inherit\"\n            >\n              <AccountCircle />\n            </IconButton>\n          </Box>\n          <Box sx={{ display: { xs: \"flex\", md: \"none\" } }}>\n            <IconButton\n              size=\"large\"\n              aria-label=\"show more\"\n              aria-controls={mobileMenuId}\n              aria-haspopup=\"true\"\n              onClick={handleMobileMenuOpen}\n              color=\"inherit\"\n            >\n              <MoreIcon />\n            </IconButton>\n          </Box>\n        </Toolbar>\n      </AppBar>\n      {renderMobileMenu}\n      {renderMenu}\n    </Box>\n  );\n}\n"],"mappings":";;AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,MAAM,EAAEC,KAAK,QAAQ,sBAAsB;AACpD,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,QAAQ,MAAM,wBAAwB;AAC7C,OAAOC,IAAI,MAAM,oBAAoB;AACrC,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,UAAU,MAAM,4BAA4B;AACnD,OAAOC,aAAa,MAAM,mCAAmC;AAC7D,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,iBAAiB,MAAM,mCAAmC;AACjE,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,QAAQ,QAAQ,OAAO;AAChC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,UAAU,MAAM,WAAW;AAClC,SAASC,SAAS,QAAQ,OAAO;AACjC,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,UAAU,IAAIC,UAAU,EAAEC,UAAU,QAAQ,yBAAyB;AAC5E,OAAOC,IAAI,MAAM,oBAAoB;AACrC,OAAOC,KAAK,MAAM,qBAAqB;AACvC,OAAOC,aAAa,MAAM,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,MAAM,GAAG/B,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;EAAEgC;AAAM,CAAC,MAAM;EAC3CC,QAAQ,EAAE,UAAU;EACpBC,YAAY,EAAEF,KAAK,CAACG,KAAK,CAACD,YAAY;EACtCE,eAAe,EAAEnC,KAAK,CAAC+B,KAAK,CAACK,OAAO,CAACC,MAAM,CAACC,KAAK,EAAE,IAAI,CAAC;EACxD,SAAS,EAAE;IACTH,eAAe,EAAEnC,KAAK,CAAC+B,KAAK,CAACK,OAAO,CAACC,MAAM,CAACC,KAAK,EAAE,IAAI;EACzD,CAAC;EACDC,WAAW,EAAER,KAAK,CAACS,OAAO,CAAC,CAAC,CAAC;EAC7BC,UAAU,EAAE,CAAC;EACbC,KAAK,EAAE,MAAM;EACb,CAACX,KAAK,CAACY,WAAW,CAACC,EAAE,CAAC,IAAI,CAAC,GAAG;IAC5BH,UAAU,EAAEV,KAAK,CAACS,OAAO,CAAC,CAAC,CAAC;IAC5BE,KAAK,EAAE;EACT;AACF,CAAC,CAAC,CAAC;AAACG,EAAA,GAdEf,MAAM;AAgBZ,MAAMgB,iBAAiB,GAAG/C,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;EAAEgC;AAAM,CAAC,MAAM;EACtDgB,OAAO,EAAEhB,KAAK,CAACS,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;EAC5BQ,MAAM,EAAE,MAAM;EACdhB,QAAQ,EAAE,UAAU;EACpBiB,aAAa,EAAE,MAAM;EACrBC,OAAO,EAAE,MAAM;EACfC,UAAU,EAAE,QAAQ;EACpBC,cAAc,EAAE,QAAQ;EACxBC,KAAK,EAAE;AACT,CAAC,CAAC,CAAC;AAACC,GAAA,GATER,iBAAiB;AAWvB,MAAMS,eAAe,GAAGxD,MAAM,CAACO,SAAS,CAAC,CAAC,CAAC;EAAEyB;AAAM,CAAC,MAAM;EACxDyB,KAAK,EAAE,SAAS;EAChB,uBAAuB,EAAE;IACvBT,OAAO,EAAEhB,KAAK,CAACS,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAClC;IACAiB,WAAW,EAAG,cAAa1B,KAAK,CAACS,OAAO,CAAC,CAAC,CAAE,GAAE;IAC9CkB,YAAY,EAAG,cAAa3B,KAAK,CAACS,OAAO,CAAC,CAAC,CAAE,GAAE;IAC/CmB,UAAU,EAAE5B,KAAK,CAAC6B,WAAW,CAACC,MAAM,CAAC,OAAO,CAAC;IAC7CnB,KAAK,EAAE,MAAM;IACb,CAACX,KAAK,CAACY,WAAW,CAACC,EAAE,CAAC,IAAI,CAAC,GAAG;MAC5BF,KAAK,EAAE;IACT;EACF;AACF,CAAC,CAAC,CAAC;AAACoB,GAAA,GAbEP,eAAe;AAerB,eAAe,SAASQ,mBAAmBA,CAACC,KAAK,EAAE;EAAAC,EAAA;EACjD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGrE,KAAK,CAACmB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACmD,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGvE,KAAK,CAACmB,QAAQ,CAAC,IAAI,CAAC;EACxE,MAAM,CAACqD,WAAW,EAAEC,cAAc,CAAC,GAAGzE,KAAK,CAACmB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACuD,WAAW,EAAEC,cAAc,CAAC,GAAGxD,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAACyD,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG1D,QAAQ,CAAC,CAAC,CAAC;EAC3D,MAAM,CAAC2D,aAAa,EAAEC,gBAAgB,CAAC,GAAG5D,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM6D,QAAQ,GAAG9D,WAAW,CAAC,CAAC;EAE9B,MAAM+D,UAAU,GAAGC,OAAO,CAACd,QAAQ,CAAC;EACpC,MAAMe,gBAAgB,GAAGD,OAAO,CAACZ,kBAAkB,CAAC;EACpD,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGlE,QAAQ,CAAC,IAAI,CAAC;EAC9C;;EAEA,MAAMmE,aAAa,GAAG,MAAAA,CAAA,KAAY;IAChC;IACA,IAAI;MACF;MACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAI,CAACF,KAAK,EAAE;QACV;QACAP,QAAQ,CAAC,GAAG,CAAC;QACb,OAAO,IAAI;MACb;MACA;MACA,MAAMU,QAAQ,GAAG,MAAMtE,KAAK,CAACuE,GAAG,CAAE,GAAEtE,UAAW,UAAS,EAAE;QACxDuE,OAAO,EAAE;UACPC,aAAa,EAAG,UAASN,KAAM;QACjC;MACF,CAAC,CAAC;MACF;MACA,OAAOG,QAAQ,CAACI,IAAI;MACpB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;MACvD,OAAO,IAAI;IACb;EACF,CAAC;EACD;EACA,MAAME,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC9B,MAAMC,IAAI,GAAG,MAAMZ,aAAa,CAAC,CAAC;IAClC,IAAIY,IAAI,EAAE;MACRb,WAAW,CAACa,IAAI,CAAC;MACjBC,cAAc,CAACD,IAAI,CAAC;MACpBE,gBAAgB,CAACF,IAAI,CAAC;MACtB,OAAOA,IAAI,CAACG,UAAU;MACtB;IACF,CAAC,MAAM;MACLL,OAAO,CAACM,GAAG,CAAC,6CAA6C,CAAC;IAC5D;EACF,CAAC;EACD;EACAhF,SAAS,CAAC,MAAM;IACd2E,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMM,qBAAqB,GAAIC,KAAK,IAAK;IACvCnC,WAAW,CAACmC,KAAK,CAACC,aAAa,CAAC;EAClC,CAAC;EAED,MAAMC,qBAAqB,GAAGA,CAAA,KAAM;IAClCnC,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAMoC,eAAe,GAAGA,CAAA,KAAM;IAC5BtC,WAAW,CAAC,IAAI,CAAC;IACjBqC,qBAAqB,CAAC,CAAC;EACzB,CAAC;EAED,MAAME,oBAAoB,GAAIJ,KAAK,IAAK;IACtCjC,qBAAqB,CAACiC,KAAK,CAACC,aAAa,CAAC;EAC5C,CAAC;EACD,MAAMI,YAAY,GAAGA,CAAA,KAAM;IACzB7B,QAAQ,CACL,8BAA6BR,WAAY,aAAYY,QAAQ,CAAC0B,OAAQ,EACzE,CAAC;EACH,CAAC;EACD,MAAMC,mBAAmB,GAAIC,CAAC,IAAK;IACjC,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,EAAE;MACrBJ,YAAY,CAAC,CAAC;IAChB;EACF,CAAC;EACD,MAAMK,kBAAkB,GAAGA,CAAA,KAAM;IAC/BlC,QAAQ,CAAE,sBAAqBI,QAAQ,CAAC0B,OAAQ,EAAC,CAAC;EACpD,CAAC;EACD,MAAMK,wBAAwB,GAAGA,CAAA,KAAM;IACrCnC,QAAQ,CAAE,2BAA0BI,QAAQ,CAAC0B,OAAQ,EAAC,CAAC;EACzD,CAAC;EACD,MAAMM,eAAe,GAAGA,CAAA,KAAM;IAC5BpC,QAAQ,CAAE,OAAM,CAAC;EACnB,CAAC;EACD,MAAMmB,cAAc,GAAG,MAAOD,IAAI,IAAK;IACrC,MAAM9E,KAAK,CACRuE,GAAG,CAAE,GAAEtE,UAAW,sBAAqB6E,IAAI,CAACY,OAAQ,EAAC,CAAC,CACtDO,IAAI,CAAE3B,QAAQ,IAAK;MAClB,MAAM4B,OAAO,GAAG5B,QAAQ,CAACI,IAAI,CAACyB,IAAI;MAClC5C,cAAc,CAAC2C,OAAO,CAACE,MAAM,CAAC;MAE9BxB,OAAO,CAACM,GAAG,CAAC,uBAAuB,EAAEgB,OAAO,CAAC;IAC/C,CAAC,CAAC,CACDG,KAAK,CAAE1B,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC;EACD,MAAMK,gBAAgB,GAAG,MAAOF,IAAI,IAAK;IACvC,MAAM9E,KAAK,CACRuE,GAAG,CAAE,GAAEtE,UAAW,wBAAuB6E,IAAI,CAACY,OAAQ,EAAC,CAAC,CACxDO,IAAI,CAAE3B,QAAQ,IAAK;MAClB,MAAM4B,OAAO,GAAG5B,QAAQ,CAACI,IAAI,CAACyB,IAAI;MAClCxC,gBAAgB,CACduC,OAAO,CAACI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QACrB,MAAMC,UAAU,GAAG,IAAIC,IAAI,CAACH,CAAC,CAACI,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC;QACnD,MAAMC,UAAU,GAAG,IAAIH,IAAI,CAACF,CAAC,CAACG,UAAU,CAAC,CAACC,OAAO,CAAC,CAAC;QACnD,OAAOC,UAAU,GAAGJ,UAAU;MAChC,CAAC,CACH,CAAC;MACD7B,OAAO,CAACM,GAAG,CAAC,uBAAuB,EAAEgB,OAAO,CAAC;MAC7C,IAAIY,KAAK,GAAG,CAAC;MACb,KAAK,IAAIC,YAAY,IAAIb,OAAO,EAAE;QAChC,IAAI,CAACa,YAAY,CAACC,OAAO,EAAEF,KAAK,EAAE;MACpC;MACArD,mBAAmB,CAACqD,KAAK,CAAC;IAC5B,CAAC,CAAC,CACDT,KAAK,CAAE1B,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC;EAED,MAAMsC,aAAa,GAAGA,CAAA,KAAM;IAC1BhD,WAAW,CAAC,IAAI,CAAC;IACjBG,YAAY,CAAC8C,UAAU,CAAC,OAAO,CAAC;IAChCtD,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC;EAED,MAAMuD,MAAM,GAAG,6BAA6B;EAC5C,MAAMC,UAAU,gBACdzG,OAAA,CAACpB,IAAI;IACHyD,QAAQ,EAAEA,QAAS;IACnBqE,YAAY,EAAE;MACZC,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACd,CAAE;IACFC,EAAE,EAAEL,MAAO;IACXM,WAAW;IACXC,eAAe,EAAE;MACfJ,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACd,CAAE;IACFI,IAAI,EAAE9D,UAAW;IACjB+D,OAAO,EAAErC,eAAgB;IAAAsC,QAAA,gBAEzBlH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAEvC,eAAgB;MAAAsC,QAAA,EAAC;IAAwB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAU,CAAC,eACvEvH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAEvC,eAAgB;MAAAsC,QAAA,EAAC;IAA2B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAU,CAAC,eAC1EvH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAEb,aAAc;MAAAY,QAAA,EAAC;IAAQ;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAU,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACjD,CACP;EAED,MAAMC,YAAY,GAAG,oCAAoC;EACzD,MAAMC,gBAAgB,gBACpBzH,OAAA,CAACpB,IAAI;IACHyD,QAAQ,EAAEE,kBAAmB;IAC7BmE,YAAY,EAAE;MACZC,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACd,CAAE;IACFC,EAAE,EAAEW,YAAa;IACjBV,WAAW;IACXC,eAAe,EAAE;MACfJ,QAAQ,EAAE,KAAK;MACfC,UAAU,EAAE;IACd,CAAE;IACFI,IAAI,EAAE5D,gBAAiB;IACvB6D,OAAO,EAAEtC,qBAAsB;IAAAuC,QAAA,gBAE/BlH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAEhC,kBAAmB;MAAA+B,QAAA,gBACpClH,OAAA,CAACzB,UAAU;QAACmJ,IAAI,EAAC,OAAO;QAAC,cAAW,gBAAgB;QAAC/F,KAAK,EAAC,SAAS;QAAAuF,QAAA,eAClElH,OAAA,CAACtB,KAAK;UAACiJ,YAAY,EAAEhF,WAAY;UAAChB,KAAK,EAAC,OAAO;UAAAuF,QAAA,eAC7ClH,OAAA,CAAChB,QAAQ;YAAAoI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACbvH,OAAA;QAAAkH,QAAA,EAAG;MAAQ;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC,eACXvH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAE/B,wBAAyB;MAAA8B,QAAA,gBAC1ClH,OAAA,CAACzB,UAAU;QACTmJ,IAAI,EAAC,OAAO;QACZ,cAAW,2BAA2B;QACtC/F,KAAK,EAAC,SAAS;QAAAuF,QAAA,eAEflH,OAAA,CAACtB,KAAK;UAACiJ,YAAY,EAAE9E,gBAAiB;UAAClB,KAAK,EAAC,OAAO;UAAAuF,QAAA,eAClDlH,OAAA,CAACf,iBAAiB;YAAAmI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eACbvH,OAAA;QAAAkH,QAAA,EAAG;MAAa;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACZ,CAAC,eAEXvH,OAAA,CAACrB,QAAQ;MAACwI,OAAO,EAAEb,aAAc;MAAAY,QAAA,gBAC/BlH,OAAA,CAACzB,UAAU;QACTmJ,IAAI,EAAC,OAAO;QACZ,cAAW,yBAAyB;QACpC,iBAAc,6BAA6B;QAC3C,iBAAc,MAAM;QACpB/F,KAAK,EAAC,SAAS;QAAAuF,QAAA,eAEflH,OAAA,CAACjB,aAAa;UAAAqI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACP,CAAC,eACbvH,OAAA;QAAAkH,QAAA,EAAG;MAAQ;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CACP;EAED,oBACEvH,OAAA,CAAC3B,GAAG;IAACuJ,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAE,CAAE;IAAAX,QAAA,gBACvBlH,OAAA,CAAC5B,MAAM;MAAC+B,QAAQ,EAAC,QAAQ;MAAA+G,QAAA,eACvBlH,OAAA,CAAC1B,OAAO;QAAA4I,QAAA,gBACNlH,OAAA,CAACzB,UAAU;UACTmJ,IAAI,EAAC,OAAO;UACZI,IAAI,EAAC,OAAO;UACZnG,KAAK,EAAC,SAAS;UACf,cAAW,aAAa;UACxBiG,EAAE,EAAE;YAAEG,EAAE,EAAE;UAAE;QAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAGJ,CAAC,eACbvH,OAAA,CAACxB,UAAU;UACTwJ,OAAO,EAAC,IAAI;UACZC,MAAM;UACNC,SAAS,EAAC,KAAK;UACfN,EAAE,EAAE;YAAEvG,OAAO,EAAE;cAAE8G,EAAE,EAAE,MAAM;cAAEC,EAAE,EAAE;YAAQ,CAAC;YAAEC,MAAM,EAAE;UAAU,CAAE;UAChElB,OAAO,EAAE9B,eAAgB;UAAA6B,QAAA,EAC1B;QAED;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACbvH,OAAA,CAACC,MAAM;UAAAiH,QAAA,gBACLlH,OAAA,CAACiB,iBAAiB;YAACkG,OAAO,EAAErC,YAAa;YAAAoC,QAAA,eACvClH,OAAA,CAAClB,UAAU;cAACqI,OAAO,EAAErC;YAAa;cAAAsC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CAAC,eACpBvH,OAAA,CAAC0B,eAAe;YACd4G,WAAW,EAAC,cAAS;YACrBC,UAAU,EAAE;cAAE,YAAY,EAAE;YAAS,CAAE;YACvCC,QAAQ,EAAGvD,CAAC,IAAKvC,cAAc,CAACuC,CAAC,CAACwD,MAAM,CAACC,KAAK,CAAE;YAChDC,SAAS,EAAE3D;UAAoB;YAAAoC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACI,CAAC,eACTvH,OAAA,CAAC3B,GAAG;UAACuJ,EAAE,EAAE;YAAEC,QAAQ,EAAE;UAAE;QAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAC5BvH,OAAA,CAAC3B,GAAG;UAACuJ,EAAE,EAAE;YAAEvG,OAAO,EAAE;cAAE8G,EAAE,EAAE,MAAM;cAAES,EAAE,EAAE;YAAO;UAAE,CAAE;UAAA1B,QAAA,gBAC/ClH,OAAA,CAACzB,UAAU;YACTmJ,IAAI,EAAC,OAAO;YACZ,cAAW,kBAAkB;YAC7B/F,KAAK,EAAC,SAAS;YACfwF,OAAO,EAAEhC,kBAAmB;YAAA+B,QAAA,eAE5BlH,OAAA,CAACtB,KAAK;cAACiJ,YAAY,EAAEhF,WAAY;cAAChB,KAAK,EAAC,OAAO;cAAAuF,QAAA,eAC7ClH,OAAA,CAAChB,QAAQ;gBAAAoI,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACP;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAEbvH,OAAA,CAACP,UAAU;YAACuI,OAAO,EAAC,QAAQ;YAACa,OAAO,EAAC,mBAAmB;YAAA3B,QAAA,EACpD4B,UAAU,iBACV9I,OAAA;cAAAkH,QAAA,gBACElH,OAAA,CAACzB,UAAU;gBACTmJ,IAAI,EAAC,OAAO;gBACZ,cAAW,2BAA2B;gBACtC/F,KAAK,EAAC,SAAS;gBAAA,GACXjC,UAAU,CAACoJ,UAAU,CAAC;gBAAA5B,QAAA,eAE1BlH,OAAA,CAACtB,KAAK;kBAACiJ,YAAY,EAAE9E,gBAAiB;kBAAClB,KAAK,EAAC,OAAO;kBAAAuF,QAAA,eAClDlH,OAAA,CAACf,iBAAiB;oBAAAmI,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACbvH,OAAA,CAACR,MAAM;gBAAA,GAAKG,UAAU,CAACmJ,UAAU,CAAC;gBAAEhH,UAAU;gBAAAoF,QAAA,EAC3CA,CAAC;kBAAE6B;gBAAgB,CAAC,kBACnB/I,OAAA,CAACJ,IAAI;kBAAA,GAAKmJ,eAAe;kBAAEC,OAAO,EAAE,GAAI;kBAAA9B,QAAA,eACtClH,OAAA,CAAC3B,GAAG;oBAAA6I,QAAA,eACFlH,OAAA,CAACH,KAAK;sBACJ+H,EAAE,EAAE;wBACFvG,OAAO,EAAE,MAAM;wBACf4H,aAAa,EAAE,QAAQ;wBACvB3H,UAAU,EAAE,QAAQ;wBACpBC,cAAc,EAAE,QAAQ;wBACxBV,KAAK,EAAE,MAAM;wBACbM,MAAM,EAAE,MAAM;wBACd+H,SAAS,EAAE,MAAM;wBACjBC,QAAQ,EAAE,MAAM;wBAChBxI,OAAO,EAAE,KAAK;wBACdL,eAAe,EAAE;sBACnB,CAAE;sBAAA4G,QAAA,eAEFlH,OAAA,CAACF,aAAa;wBAACsJ,OAAO,EAAErG;sBAAc;wBAAAqE,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACpC;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACL;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACF;cACP;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN;UACN;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACS,CAAC,eACbvH,OAAA,CAACzB,UAAU;YACTmJ,IAAI,EAAC,OAAO;YACZI,IAAI,EAAC,KAAK;YACV,cAAW,yBAAyB;YACpC,iBAAetB,MAAO;YACtB,iBAAc,MAAM;YACpBW,OAAO,EAAE3C,qBAAsB;YAC/B7C,KAAK,EAAC,SAAS;YAAAuF,QAAA,eAEflH,OAAA,CAACjB,aAAa;cAAAqI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACNvH,OAAA,CAAC3B,GAAG;UAACuJ,EAAE,EAAE;YAAEvG,OAAO,EAAE;cAAE8G,EAAE,EAAE,MAAM;cAAES,EAAE,EAAE;YAAO;UAAE,CAAE;UAAA1B,QAAA,eAC/ClH,OAAA,CAACzB,UAAU;YACTmJ,IAAI,EAAC,OAAO;YACZ,cAAW,WAAW;YACtB,iBAAeF,YAAa;YAC5B,iBAAc,MAAM;YACpBL,OAAO,EAAEtC,oBAAqB;YAC9BlD,KAAK,EAAC,SAAS;YAAAuF,QAAA,eAEflH,OAAA,CAACd,QAAQ;cAAAkI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EACRE,gBAAgB,EAChBhB,UAAU;EAAA;IAAAW,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACR,CAAC;AAEV;AAACnF,EAAA,CAtUuBF,mBAAmB;EAAA,QAOxB/C,WAAW;AAAA;AAAAkK,GAAA,GAPNnH,mBAAmB;AAAA,IAAAlB,EAAA,EAAAS,GAAA,EAAAQ,GAAA,EAAAoH,GAAA;AAAAC,YAAA,CAAAtI,EAAA;AAAAsI,YAAA,CAAA7H,GAAA;AAAA6H,YAAA,CAAArH,GAAA;AAAAqH,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}