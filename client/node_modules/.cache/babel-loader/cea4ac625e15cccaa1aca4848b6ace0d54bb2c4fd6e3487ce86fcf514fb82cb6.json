{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Card,CardContent,Typography,CardActions,Button}from\"@mui/material\";import{useState}from\"react\";import axios from\"axios\";import backendUrl from\"../config\";import{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserCard(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),following=_useState2[0],setFollowing=_useState2[1];var followUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentTimestamp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentTimestamp=new Date().toISOString();axios.post(\"\".concat(backendUrl,\"api/newFollow\"),{user_id:props.result.user_id,follower_id:props.userInfo,created_at:currentTimestamp}).then(function(response){var message=response.data.message;setFollowing(true);console.log(\"Response from server:\",message);}).catch(function(error){console.error(\"Error posting data: \",error);});axios.post(\"\".concat(backendUrl,\"api/newNotification\"),{user_id:props.result.user_id,content:\"\".concat(props.userName,\" is now following you!\"),created_at:currentTimestamp,is_read:false}).then(function(response){var message=response.data.message;console.log(\"Response from server:\",message);}).catch(function(error){console.error(\"Error posting data: \",error);});case 3:case\"end\":return _context.stop();}},_callee);}));return function followUser(){return _ref.apply(this,arguments);};}();var unfollowUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0://   const currentTimestamp = new Date().toISOString();\naxios.delete(\"\".concat(backendUrl,\"api/unfollow\"),{data:{user_id:props.result.user_id,follower_id:props.userInfo}}).then(function(response){var message=response.data.message;setFollowing(false);console.log(\"Response from server:\",message);}).catch(function(error){console.error(\"Error deleting data: \",error);});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function unfollowUser(){return _ref2.apply(this,arguments);};}();var isFollowing=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:axios.get(\"\".concat(backendUrl,\"api/following/\").concat(props.result.user_id,\"/\").concat(props.userInfo)).then(function(response){var message=response.data.rows;console.log(\"Response from server:\",message);if(message.length>0)setFollowing(true);else setFollowing(false);}).catch(function(error){console.error(\"Error fetching data: \",error);});case 1:case\"end\":return _context3.stop();}},_callee3);}));return function isFollowing(){return _ref3.apply(this,arguments);};}();useEffect(function(){isFollowing();},[]);if(!following)return/*#__PURE__*/_jsxs(Card,{style:{maxWidth:\"100%\"},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h4\",component:\"div\",children:props.result.first_name+\" \"+props.result.last_name}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",children:props.result.username})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:followUser,children:\"Follow\"})})]});else return/*#__PURE__*/_jsxs(Card,{style:{maxWidth:\"100%\"},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h4\",component:\"div\",children:props.result.first_name+\" \"+props.result.last_name}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",color:\"text.secondary\",children:props.result.username})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",onClick:unfollowUser,children:\"Unfollow\"})})]});}export default UserCard;","map":{"version":3,"names":["Card","CardContent","Typography","CardActions","Button","useState","axios","backendUrl","useEffect","jsx","_jsx","jsxs","_jsxs","UserCard","props","_useState","_useState2","_slicedToArray","following","setFollowing","followUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentTimestamp","wrap","_callee$","_context","prev","next","Date","toISOString","post","concat","user_id","result","follower_id","userInfo","created_at","then","response","message","data","console","log","catch","error","content","userName","is_read","stop","apply","arguments","unfollowUser","_ref2","_callee2","_callee2$","_context2","delete","isFollowing","_ref3","_callee3","_callee3$","_context3","get","rows","length","style","maxWidth","children","gutterBottom","variant","component","first_name","last_name","color","username","size","onClick"],"sources":["/Users/bryansanchezandrade/Documents/theBox/client/src/components/UserCard.js"],"sourcesContent":["import {\n  Card,\n  CardContent,\n  Typography,\n  CardActions,\n  Button,\n} from \"@mui/material\";\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport backendUrl from \"../config\";\nimport { useEffect } from \"react\";\n\nfunction UserCard(props) {\n  const [following, setFollowing] = useState(false);\n  const followUser = async () => {\n    const currentTimestamp = new Date().toISOString();\n    axios\n      .post(`${backendUrl}api/newFollow`, {\n        user_id: props.result.user_id,\n        follower_id: props.userInfo,\n        created_at: currentTimestamp,\n      })\n      .then((response) => {\n        const { message } = response.data;\n        setFollowing(true);\n        console.log(\"Response from server:\", message);\n      })\n      .catch((error) => {\n        console.error(\"Error posting data: \", error);\n      });\n    axios\n      .post(`${backendUrl}api/newNotification`, {\n        user_id: props.result.user_id,\n        content: `${props.userName} is now following you!`,\n        created_at: currentTimestamp,\n        is_read: false,\n      })\n      .then((response) => {\n        const { message } = response.data;\n        console.log(\"Response from server:\", message);\n      })\n      .catch((error) => {\n        console.error(\"Error posting data: \", error);\n      });\n  };\n  const unfollowUser = async () => {\n    //   const currentTimestamp = new Date().toISOString();\n    axios\n      .delete(`${backendUrl}api/unfollow`, {\n        data: {\n          user_id: props.result.user_id,\n          follower_id: props.userInfo,\n        },\n      })\n      .then((response) => {\n        const { message } = response.data;\n        setFollowing(false);\n        console.log(\"Response from server:\", message);\n      })\n      .catch((error) => {\n        console.error(\"Error deleting data: \", error);\n      });\n  };\n\n  const isFollowing = async () => {\n    axios\n      .get(\n        `${backendUrl}api/following/${props.result.user_id}/${props.userInfo}`\n      )\n      .then((response) => {\n        const message = response.data.rows;\n        console.log(\"Response from server:\", message);\n        if (message.length > 0) setFollowing(true);\n        else setFollowing(false);\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data: \", error);\n      });\n  };\n  useEffect(() => {\n    isFollowing();\n  }, []);\n\n  if (!following)\n    return (\n      <Card style={{ maxWidth: \"100%\" }}>\n        <CardContent>\n          <Typography gutterBottom variant=\"h4\" component=\"div\">\n            {props.result.first_name + \" \" + props.result.last_name}\n          </Typography>\n          <Typography variant=\"h5\" color=\"text.secondary\">\n            {props.result.username}\n          </Typography>\n        </CardContent>\n        <CardActions>\n          <Button size=\"small\" onClick={followUser}>\n            Follow\n          </Button>\n        </CardActions>\n      </Card>\n    );\n  else\n    return (\n      <Card style={{ maxWidth: \"100%\" }}>\n        <CardContent>\n          <Typography gutterBottom variant=\"h4\" component=\"div\">\n            {props.result.first_name + \" \" + props.result.last_name}\n          </Typography>\n          <Typography variant=\"h5\" color=\"text.secondary\">\n            {props.result.username}\n          </Typography>\n        </CardContent>\n        <CardActions>\n          <Button size=\"small\" onClick={unfollowUser}>\n            Unfollow\n          </Button>\n        </CardActions>\n      </Card>\n    );\n}\nexport default UserCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}