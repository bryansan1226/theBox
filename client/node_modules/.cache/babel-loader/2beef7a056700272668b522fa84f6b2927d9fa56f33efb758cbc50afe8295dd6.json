{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bryansanchezandrade/Documents/theBox/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import backendUrl from\"../config\";import axios from\"axios\";import{useEffect}from\"react\";import Post from\"./Post\";import{CardContent}from\"@mui/material\";import NewPostForm from\"./NewPostForm\";import Typography from\"@mui/material/Typography\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostFeed(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],getPosts=_useState2[1];var allPosts=[];var getUserPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:axios.get(\"\".concat(backendUrl,\"api/getUserPosts/\").concat(props.userInfo.user_id)).then(function(response){var message=response.data.rows;allPosts=_toConsumableArray(message);}).catch(function(error){console.error(\"Error fetching data: \",error);});case 1:case\"end\":return _context.stop();}},_callee);}));return function getUserPosts(){return _ref.apply(this,arguments);};}();var getFollowingPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:axios.get(\"\".concat(backendUrl,\"api/getFollowingPosts/\").concat(props.userInfo.user_id)).then(function(response){var message=response.data.rows;allPosts=[].concat(_toConsumableArray(allPosts),_toConsumableArray(message));console.log(\"Response from server:\",message);getPosts(allPosts.sort(function(a,b){var timeStampA=new Date(a.created_at).getTime();var timeStampB=new Date(b.created_at).getTime();return timeStampB-timeStampA;}));}).catch(function(error){console.error(\"Error fetching data: \",error);});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function getFollowingPosts(){return _ref2.apply(this,arguments);};}();useEffect(function(){getUserPosts().then(function(){getFollowingPosts();});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NewPostForm,{userInfo:props.userInfo,getUserPosts:getUserPosts}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Feed:\"}),/*#__PURE__*/_jsx(\"div\",{children:posts.map(function(content,index){return/*#__PURE__*/_jsx(Post,{content:content,userInfo:props.userInfo},index);})})]});}export default PostFeed;","map":{"version":3,"names":["useState","backendUrl","axios","useEffect","Post","CardContent","NewPostForm","Typography","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","PostFeed","props","_useState","_useState2","_slicedToArray","posts","getPosts","allPosts","getUserPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","concat","userInfo","user_id","then","response","message","data","rows","_toConsumableArray","catch","error","console","stop","apply","arguments","getFollowingPosts","_ref2","_callee2","_callee2$","_context2","log","sort","a","b","timeStampA","Date","created_at","getTime","timeStampB","children","variant","gutterBottom","map","content","index"],"sources":["/Users/bryansanchezandrade/Documents/theBox/client/src/components/PostFeed.js"],"sourcesContent":["import { useState } from \"react\";\nimport backendUrl from \"../config\";\nimport axios from \"axios\";\nimport { useEffect } from \"react\";\nimport Post from \"./Post\";\nimport { CardContent } from \"@mui/material\";\nimport NewPostForm from \"./NewPostForm\";\nimport Typography from \"@mui/material/Typography\";\n\nfunction PostFeed(props) {\n  const [posts, getPosts] = useState([]);\n  let allPosts = [];\n  const getUserPosts = async () => {\n    axios\n      .get(`${backendUrl}api/getUserPosts/${props.userInfo.user_id}`)\n      .then((response) => {\n        const message = response.data.rows;\n        allPosts = [...message];\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data: \", error);\n      });\n  };\n  const getFollowingPosts = async () => {\n    axios\n      .get(`${backendUrl}api/getFollowingPosts/${props.userInfo.user_id}`)\n      .then((response) => {\n        const message = response.data.rows;\n        allPosts = [...allPosts, ...message];\n        console.log(\"Response from server:\", message);\n        getPosts(\n          allPosts.sort((a, b) => {\n            const timeStampA = new Date(a.created_at).getTime();\n            const timeStampB = new Date(b.created_at).getTime();\n            return timeStampB - timeStampA;\n          })\n        );\n      })\n      .catch((error) => {\n        console.error(\"Error fetching data: \", error);\n      });\n  };\n\n  useEffect(() => {\n    getUserPosts().then(() => {\n      getFollowingPosts();\n    });\n  }, []);\n\n  return (\n    <>\n      <NewPostForm userInfo={props.userInfo} getUserPosts={getUserPosts} />\n      <Typography variant=\"h5\" gutterBottom>\n        Feed:\n      </Typography>\n      <div>\n        {posts.map((content, index) => (\n          <Post key={index} content={content} userInfo={props.userInfo} />\n        ))}\n      </div>\n    </>\n  );\n}\nexport default PostFeed;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}